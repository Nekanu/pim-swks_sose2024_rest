name: Automated API tests using Postman CLI

on:
  push:
    branches:
      - main
      - develop
  pull_request:
    branches:
      - main
      - develop

jobs:
    test-postman:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - name: Install Postman CLI
              run: |
                  curl -o- "https://dl-cli.pstmn.io/install/linux64.sh" | sh
            - name: Login to Postman CLI
              run: postman login --with-api-key ${{ secrets.POSTMAN_API_KEY }}
            - name: Run API tests
              run: |
                postman collection run "32069873-6161a362-b7df-4871-ae34-840197b818b5"
                  # Lint your API using Postman CLI
                  postman api lint b7b7ccc8-57f5-41ee-b282-85889746455e
